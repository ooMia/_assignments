from eth_hash.auto import (
    keccak,
)

from tqdm import tqdm

target: list = ["0a976363"]
target_index: dict = {target[i]: i for i in range(len(target))}


def is_target(h: str) -> bool:
    return h in target_index.keys()


def int_to_keccak(s: str) -> str:
    # integer failed to find the target
    return keccak(s.encode()).hex()


def hex_to_keccak(s: str) -> str:
    return keccak(bytes.fromhex(s)).hex()


if __name__ == "__main__":
    constant_abi = "(uint256,bytes,uint256)"

    function_prefix = "a"
    for s in tqdm(range(20000000, 2**32)):
        function_name = function_prefix + str(s)
        # print(function_name)
        keccak_result = keccak(bytes(function_name.encode("utf-8"))).hex()
        function_id = keccak_result[:8]

        if is_target(function_id):
            print(function_id, function_name)
            break

